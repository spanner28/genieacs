#!/usr/bin/env node

if (process.argv.length < 3) {
  console.error('Please specify a username to generate a token for');
  process.exit(1)
}

var username = process.argv[2];

const jwt = require('jsonwebtoken');
const fs = require('fs');

var privateKey = fs.readFileSync('/home/acs/.ssh/id_rsa');
var token = jwt.sign(
  {
    exp: Math.floor(Date.now() / 1000) + (60 * 60 * 24 * 365 * 10),
    username: username
  },
  privateKey,
  {
    algorithm: 'RS256'
  }
);

console.log('Your token is: "' + token + '"')
